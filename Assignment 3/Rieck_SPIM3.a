        .data
prompt:        .asciiz        "Enter a number between 0 and 44: "
        .text
        .globl main

# $a0-3 = arguments
# v0-1  = return values
main:
    
    # print the prompt
    lw   $a0,    prompt
    li   $v0,    4
    syscall

    # read in int
    li   $v0,    5
    syscall

    # moves inputted value to $a0
    # $a0 = fib term
    move $a0,    $v0

    # $a1 = initial summation
    li   $a1,    0
    
    jal  fib

done:
    li   $v0,    10
    syscall

# --------------------------
        .data
        .text
fib:
    move  $t0,    $a0
    move  $t1,    $a1

    # t0 = fib term
    # t1 = summation

    bne   $t0,    $zero,    start_fib

    # move fib term and sum to return registers
    move  $v0,    $t0
    move  $v1,    $t1
    j     $ra

start_fib:
    # a0 = fib term
    # a1 = first fib term
    # a2 = second fib term
    # a3 = summation
    move  $a0,    $t0
    li    $a1,    0
    li    $a2,    1
    move  $a3,    $t1

    jal   smart_fib

# --------------------------
        .data
        .text
smart_fib:
    
    # adjust stack pointer
    add   $sp,    $sp,    -16

    # move arguments to temp registers
    # for later use
    move  $t0,    $a0
    move  $t1,    $a1
    move  $t2,    $a2
    move  $t3,    $a3
    
    # compute the sum (sum = sum + second_arg)
    add   $t3,    $t3,    $t2

    bne   $t0,    1,      recurse
    
    move  $v0,    $t2 # return current term (1)
    move  $v1,    $t3 # return current sum (0+1)
    add   $sp,    $sp,    16

recurse:
    sub   
